#!/bin/bash

# threadsrecon CLI launcher script
# This script activates the virtual environment and runs the CLI

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
VENV_DIR="$SCRIPT_DIR/venv"

# Check if virtual environment exists
if [ ! -d "$VENV_DIR" ]; then
    echo "❌ Virtual environment not found at $VENV_DIR"
    echo "📦 Please run the installation script first:"
    echo "   ./install.sh"
    exit 1
fi

# Activate virtual environment and run CLI
source "$VENV_DIR/bin/activate"

# Check if main dependencies are available
if ! python3 -c "import selenium" 2>/dev/null; then
    echo "❌ Missing dependencies in virtual environment"
    echo "📦 Please install requirements:"
    echo "   source venv/bin/activate"
    echo "   pip install -r requirements.txt"
    exit 1
fi

# Run the CLI with all arguments passed through
cd "$SCRIPT_DIR"
python3 main.py "$@"